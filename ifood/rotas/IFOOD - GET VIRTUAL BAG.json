{"tabela":{"nome":"PCINTEGRACAOROTASERVICO","campos":[{"nome":"ID","valor":"IFOOD - Get virtual bag"},{"nome":"IDEMPRESAAPI","valor":"IFOOD"},{"nome":"SERVICO","valor":"IFOOD - Get virtual bag"},{"nome":"LAYOUTCOMUNICACAO","valor":{"name":"IFOOD - Get virtual bag","request":{"method":"GET","header":[{"key":"Accept","value":"*/*"},{"key":"Content-Type","value":"application/json"},{"key":"Authorization","value":"Bearer {{TOKEN}}"}],"url":{"raw":"{{URL_BASE}}/order/v1.0/orders/{{ORDER_ID}}/virtual-bag","query":[]}},"response":[]}},{"nome":"LAYOUTTRANSFORMACAO","valor":[{"operation":"modify-overwrite-beta","spec":{"idExterno":"=concat('ifood-virtualbag-', @(1,id), '-', @(1,createdAt) )"}},{"operation":"shift","spec":{"idExterno":"keep.idExterno","id":"keep.orderIdHube","bag":{"items":{"*":{"uniqueId":"listOfOrderItem[&1].uniqueId","unavailable":"listOfOrderItem[&1].unavailable","quantity":"listOfOrderItem[&1].quantity","prices":{"unitValue":{"value":"listOfOrderItem[&3]._unitValueCents"},"salePriceKg":{"value":"listOfOrderItem[&3]._salePriceKgCents"}},"weight":{"value":"listOfOrderItem[&2]._weightGrams"},"ean":"listOfOrderItem[&1]._ean","product":{"plu":"listOfOrderItem[&2].productId","isVariableWeight":"listOfOrderItem[&2]._isVariableWeightBool"}}}},"benefit":{"benefits":"keep.benefits"},"operationMode":"keep.operationMode","taxPayer":{"identification":{"type":{"CPF":{"@(2,value)":"listConsumerData.taxId"}}}},"customer":{"name":"listConsumerData.customerName","email":"listConsumerData.email","phones":{"*":{"phone":"listConsumerData.deliveryPhone"}},"billingAddress":{"streetName":"listConsumerData.deliveryAddress","streetNumber":"listConsumerData.deliveryNumber","district":"listConsumerData.deliveryNeighborhood","city":"listConsumerData.deliveryCity","state":"listConsumerData.deliveryState","zipCode":"listConsumerData.deliveryZipCode"}}}},{"operation":"modify-overwrite-beta","spec":{"keep":{"saleType":1,"saleOrigin":"R"},"listOfOrderItem":{"*":{"sellPrice":"=divide(@(1,_unitValueCents), 100)","quantityKg":"=divide(@(1,_weightGrams), 1000)","sellPriceKg":"=divide(@(1,_salePriceKgCents), 100)","productSKUERPReferenceKey":"=concat(@(1,_ean), '-', @(1,productId))","isVariableWeight":"=concat('', @(1,_isVariableWeightBool))"}}}},{"operation":"shift","spec":{"keep":{"idExterno":"idExterno[]","orderIdHube":"orderIdHube","saleType":"saleType","saleOrigin":"saleOrigin","benefits":"benefits","operationMode":"operationMode"},"listOfOrderItem":{"*":{"unavailable":"listOfOrderItem[&1].unavailable","uniqueId":"listOfOrderItem[&1].uniqueId","quantity":"listOfOrderItem[&1].quantity","sellPrice":"listOfOrderItem[&1].sellPrice","quantityKg":"listOfOrderItem[&1].quantityKg","sellPriceKg":"listOfOrderItem[&1].sellPriceKg","isVariableWeight":"listOfOrderItem[&1].isVariableWeight","productId":"listOfOrderItem[&1].productId","productSKUERPReferenceKey":"listOfOrderItem[&1].productSKUERPReferenceKey"}},"listConsumerData":"listConsumerData[]"}},{"operation":"shift","spec":{"idExterno":"idExterno","orderIdHube":"orderIdHube","saleType":"saleType","saleOrigin":"saleOrigin","benefits":"benefits","operationMode":"operationMode","listOfOrderItem":{"*":{"isVariableWeight":{"true|True":{"@(2,quantityKg)":"listOfOrderItem[&3].quantity","@(2,sellPriceKg)":"listOfOrderItem[&3].sellPrice"},"*":{"@(2,quantity)":"listOfOrderItem[&3].quantity","@(2,sellPrice)":"listOfOrderItem[&3].sellPrice"}},"uniqueId":"listOfOrderItem[&1].uniqueId","unavailable":"listOfOrderItem[&1].unavailable","productId":"listOfOrderItem[&1].productId","productSKUERPReferenceKey":"listOfOrderItem[&1].productSKUERPReferenceKey"}},"listConsumerData":"listConsumerData"}},{"operation":"default","spec":{"customer":{"id":"{{CODCLI_PADRAO}}"},"seller":"{{CODUSUR_PADRAO}}","branchId":"{{FILIAL_WTA}}","chargingId":"{{CODCOB_PADRAO}}","paymentPlanId":"{{CODPLPAG_PADRAO}}"}},{"operation":"remove","spec":{"listOfOrderItem":{"*":{"_ean":"","_unitValueCents":"","_salePriceKgCents":"","_weightGrams":"","_isVariableWeightBool":""}},"keep":""}}]},{"nome":"ATIVO","valor":"S"},{"nome":"TIPOPROCESSO","valor":"BUSCAR"},{"nome":"AUTENTICADOR","valor":"N"},{"nome":"DATASINCRONISMO","valor":""},{"nome":"REFRESHTOKEN","valor":"N"},{"nome":"SOMENTEATUALIZARINTEGRACAOCORE","valor":"N"}]}}